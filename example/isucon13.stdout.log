yarn run v1.22.19
$ jscodeshift --dry -s --extensions=ts -t ./dist/index.js sample
 REP sample/handlers/livecomment-handler.ts {"getLivecommentsHandler":["SELECT * FROM livecomments WHERE livestream_id = ? ORDER BY created_at DESC"],"getNgwords":["SELECT * FROM ng_words WHERE user_id = ? AND livestream_id = ? ORDER BY created_at DESC"],"postLivecommentHandler":["SELECT id, user_id, livestream_id, word FROM ng_words WHERE user_id = ? AND livestream_id = ?","INSERT INTO livecomments (user_id, livestream_id, comment, tip, created_at) VALUES (?, ?, ?, ?, ?)","SELECT * FROM livestreams WHERE id = ?","SELECT COUNT(*) FROM (SELECT ? AS text) AS texts INNER JOIN (SELECT CONCAT('%', ?, '%') AS pattern) AS patterns ON texts.text LIKE patterns.pattern;"],"reportLivecommentHandler":["INSERT INTO livecomment_reports(user_id, livestream_id, livecomment_id, created_at) VALUES (?, ?, ?, ?)","SELECT * FROM livestreams WHERE id = ?","SELECT * FROM livecomments WHERE id = ?"],"moderateHandler":["SELECT * FROM livestreams WHERE id = ? AND user_id = ?","INSERT INTO ng_words(user_id, livestream_id, word, created_at) VALUES (?, ?, ?, ?)","SELECT * FROM ng_words WHERE livestream_id = ?","SELECT * FROM livecomments","DELETE FROM livecomments WHERE id = ? AND livestream_id = ? AND (SELECT COUNT(*) FROM (SELECT ? AS text) AS texts INNER JOIN (SELECT CONCAT('%', ?, '%') AS pattern) AS patterns ON texts.text LIKE patterns.pattern) >= 1;"]}
 REP sample/handlers/livestream-handler.ts {"reserveLivestreamHandler":["SELECT * FROM reservation_slots WHERE start_at >= ? AND end_at <= ? FOR UPDATE","SELECT slot FROM reservation_slots WHERE start_at = ? AND end_at = ?","UPDATE reservation_slots SET slot = slot - 1 WHERE start_at >= ? AND end_at <= ?","INSERT INTO livestreams (user_id, title, description, playlist_url, thumbnail_url, start_at, end_at) VALUES(?, ?, ?, ?, ?, ?, ?)","INSERT INTO livestream_tags (livestream_id, tag_id) VALUES (?, ?)"],"searchLivestreamsHandler":["SELECT id FROM tags WHERE name = ?","SELECT * FROM livestream_tags WHERE tag_id IN (?) ORDER BY livestream_id DESC","SELECT * FROM livestreams WHERE id = ?","SELECT * FROM livestreams ORDER BY id DESC"],"getMyLivestreamsHandler":["SELECT * FROM livestreams WHERE user_id = ?"],"getUserLivestreamsHandler":["SELECT * FROM users WHERE name = ?","SELECT * FROM livestreams WHERE user_id = ?"],"enterLivestreamHandler":["INSERT INTO livestream_viewers_history (user_id, livestream_id, created_at) VALUES(?, ?, ?)"],"exitLivestreamHandler":["DELETE FROM livestream_viewers_history WHERE user_id = ? AND livestream_id = ?"],"getLivestreamHandler":["SELECT * FROM livestreams WHERE id = ?"],"getLivecommentReportsHandler":["SELECT * FROM livestreams WHERE id = ?","SELECT * FROM livecomment_reports WHERE livestream_id = ?"]}
 REP sample/handlers/payment-handler.ts {"GetPaymentResult":["SELECT IFNULL(SUM(tip), 0) FROM livecomments"]}
 REP sample/handlers/reaction-handler.ts {"getReactionsHandler":["SELECT * FROM reactions WHERE livestream_id = ? ORDER BY created_at DESC"],"postReactionHandler":["INSERT INTO reactions (user_id, livestream_id, emoji_name, created_at) VALUES (?, ?, ?, ?)"]}
 REP sample/utils/fill-livecomment-response.ts {"fillLivecommentResponse":["SELECT * FROM users WHERE id = ?","SELECT * FROM livestreams WHERE id = ?"]}
 REP sample/utils/fill-livestream-response.ts {"fillLivestreamResponse":["SELECT * FROM users WHERE id = ?","SELECT * FROM livestream_tags WHERE livestream_id = ?","SELECT * FROM tags WHERE id = ?"]}
 REP sample/utils/fill-livecomment-report-response.ts {"fillLivecommentReportResponse":["SELECT * FROM users WHERE id = ?","SELECT * FROM livecomments WHERE id = ?"]}
 REP sample/utils/fill-reaction-response.ts {"fillReactionResponse":["SELECT * FROM users WHERE id = ?","SELECT * FROM livestreams WHERE id = ?"]}
 REP sample/utils/fill-user-response.ts {"fillUserResponse":["SELECT * FROM themes WHERE user_id = ?","SELECT image FROM icons WHERE user_id = ?"]}
 REP sample/handlers/top-handler.ts {"getTagHandler":["SELECT * FROM tags"],"getStreamerThemeHandler":["SELECT id FROM users WHERE name = ?","SELECT * FROM themes WHERE user_id = ?"]}
 REP sample/handlers/user-handler.ts {"getIconHandler":["SELECT * FROM users WHERE name = ?","SELECT image FROM icons WHERE user_id = ?"],"postIconHandler":["DELETE FROM icons WHERE user_id = ?","INSERT INTO icons (user_id, image) VALUES (?, ?)"],"getMeHandler":["SELECT * FROM users WHERE id = ?"],"registerHandler":["INSERT INTO users (name, display_name, description, password) VALUES(?, ?, ?, ?)","INSERT INTO themes (user_id, dark_mode) VALUES(?, ?)"],"loginHandler":["SELECT * FROM users WHERE name = ?"],"getUserHandler":["SELECT * FROM users WHERE name = ?"]}
 REP sample/handlers/stats-handler.ts {"getUserStatisticsHandler":["SELECT * FROM users WHERE name = ?","SELECT * FROM users","SELECT COUNT(*) FROM users u INNER JOIN livestreams l ON l.user_id = u.id INNER JOIN reactions r ON r.livestream_id = l.id WHERE u.id = ?","SELECT IFNULL(SUM(l2.tip), 0) FROM users u INNER JOIN livestreams l ON l.user_id = u.id INNER JOIN livecomments l2 ON l2.livestream_id = l.id WHERE u.id = ?","SELECT COUNT(*) FROM users u INNER JOIN livestreams l ON l.user_id = u.id INNER JOIN reactions r ON r.livestream_id = l.id WHERE u.name = ?","SELECT * FROM livestreams WHERE user_id = ?","SELECT * FROM livecomments WHERE livestream_id = ?","SELECT COUNT(*) FROM livestream_viewers_history WHERE livestream_id = ?","SELECT r.emoji_name FROM users u INNER JOIN livestreams l ON l.user_id = u.id INNER JOIN reactions r ON r.livestream_id = l.id WHERE u.name = ? GROUP BY emoji_name ORDER BY COUNT(*) DESC, emoji_name DESC LIMIT 1"],"getLivestreamStatisticsHandler":["SELECT * FROM livestreams WHERE id = ?","SELECT * FROM livestreams","SELECT COUNT(*) FROM livestreams l INNER JOIN reactions r ON l.id = r.livestream_id WHERE l.id = ?","SELECT IFNULL(SUM(l2.tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l.id = l2.livestream_id WHERE l.id = ?","SELECT COUNT(*) FROM livestreams l INNER JOIN livestream_viewers_history h ON h.livestream_id = l.id WHERE l.id = ?","SELECT IFNULL(MAX(tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l2.livestream_id = l.id WHERE l.id = ?","SELECT COUNT(*) FROM livestreams l INNER JOIN reactions r ON r.livestream_id = l.id WHERE l.id = ?","SELECT COUNT(*) FROM livestreams l INNER JOIN livecomment_reports r ON r.livestream_id = l.id WHERE l.id = ?"]}
Done in 21.98s.
