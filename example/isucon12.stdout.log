yarn run v1.22.19
$ jscodeshift --dry -s --extensions=ts -t ./dist/index.js sample2/
 REP sample2/main.ts {"dispenseID":["REPLACE INTO id_generator (stub) VALUES (?)"],"retrieveTenantRowFromHeader":["SELECT * FROM tenant WHERE name = ?"],"retrievePlayer":["SELECT * FROM player WHERE id = ?"],"retrieveCompetition":["SELECT * FROM competition WHERE id = ?"],"POST /api/admin/tenants/add":["INSERT INTO tenant (name, display_name, created_at, updated_at) VALUES (?, ?, ?, ?)"],"billingReportByCompetition":["SELECT player_id, created_at AS min_created_at FROM visit_history_min WHERE tenant_id = ? AND competition_id = ?","SELECT player_id FROM my_player_score WHERE tenant_id = ? AND competition_id = ?"],"GET /api/admin/tenants/billing":["SELECT * FROM tenant ORDER BY id DESC","SELECT * FROM competition WHERE tenant_id = ?"],"GET /api/organizer/players":["SELECT * FROM player WHERE tenant_id = ? ORDER BY created_at DESC"],"POST /api/organizer/players/add":["INSERT INTO player (id, tenant_id, display_name, is_disqualified, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)"],"POST /api/organizer/player/:playerId/disqualified":["UPDATE player SET is_disqualified = ?, updated_at = ? WHERE id = ?"],"POST /api/organizer/competitions/add":["INSERT INTO competition (id, tenant_id, title, finished_at, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)"],"POST /api/organizer/competition/:competitionId/finish":["UPDATE competition SET finished_at = ?, updated_at = ? WHERE id = ?"],"POST /api/organizer/competition/:competitionId/score":["DELETE FROM my_player_score WHERE tenant_id = ? AND competition_id = ?","INSERT INTO my_player_score (tenant_id, player_id, competition_id, score, row_num) VALUES ($tenant_id, $player_id, $competition_id, $score, $row_num)"],"GET /api/organizer/billing":["SELECT * FROM competition WHERE tenant_id=? ORDER BY created_at DESC"],"competitionsHandler":["SELECT * FROM competition WHERE tenant_id = ? ORDER BY created_at DESC"],"GET /api/player/player/:playerId":["SELECT * FROM competition WHERE tenant_id = ? ORDER BY created_at ASC","SELECT * FROM my_player_score WHERE tenant_id = ? AND competition_id = ? AND player_id = ?"],"GET /api/player/competition/:competitionId/ranking":["SELECT * FROM tenant WHERE id = ?","INSERT ignore INTO visit_history_min (player_id, tenant_id, competition_id, created_at) VALUES (?, ?, ?, ?)","SELECT score, row_num, player_id, p.display_name as display_name FROM my_player_score mpc left join player p on p.id = mpc.player_id WHERE mpc.tenant_id = ? AND competition_id = ? ORDER BY row_num DESC"],"migrateSQLite3DBImpl":["create index tenant_id_idx_on_competition on competition(tenant_id);","create index tenant_id_created_at_idx_on_competition on competition(tenant_id, created_at);","create index tenant_id_created_at_idx_on_player on player(tenant_id, created_at);","create table my_player_score( tenant_id BIGINT NOT NULL, player_id VARCHAR(255) NOT NULL, competition_id VARCHAR(255) NOT NULL, score BIGINT NOT NULL, row_num BIGINT NOT NULL, unique(player_id, tenant_id, competition_id) );","replace into my_player_score(tenant_id, player_id,competition_id, score,row_num) select tenant_id, player_id,competition_id, score,row_num from player_score order by row_num asc;"]}
Done in 1.27s.
